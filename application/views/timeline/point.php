<style type="text/css">
  .card-header{
    border-radius: 0px !important;
    padding: 0px !important;
  }

  .position-credit{
    font-size: 60px;
    font-family: 'Titillium Web';
    line-height: 1;
  }

  .position-credit-sub{
    font-size: 12px;
    line-height: 0;
  }

  .partisipan{
    margin-left: 0px;
  } 
 
  .countPoint{
    padding-top: 50px;
    text-align: center;
    margin-right: 0px;
    padding-right: 0px;
  }

  .card-header{
    background: rgba(235,188,0,1);
    background: -moz-linear-gradient(top, rgba(235,188,0,1) 0%, rgba(235,188,0,1) 27%, rgba(233,177,3,1) 34%, rgba(232,174,4,1) 36%, rgba(226,138,14,0.99) 58%, rgba(224,130,16,0.99) 63%, rgba(255,81,0,0.99) 94%, rgba(255,68,0,0.99) 100%);
    background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(235,188,0,1)), color-stop(27%, rgba(235,188,0,1)), color-stop(34%, rgba(233,177,3,1)), color-stop(36%, rgba(232,174,4,1)), color-stop(58%, rgba(226,138,14,0.99)), color-stop(63%, rgba(224,130,16,0.99)), color-stop(94%, rgba(255,81,0,0.99)), color-stop(100%, rgba(255,68,0,0.99)));
    background: -webkit-linear-gradient(top, rgba(235,188,0,1) 0%, rgba(235,188,0,1) 27%, rgba(233,177,3,1) 34%, rgba(232,174,4,1) 36%, rgba(226,138,14,0.99) 58%, rgba(224,130,16,0.99) 63%, rgba(255,81,0,0.99) 94%, rgba(255,68,0,0.99) 100%);
    background: -o-linear-gradient(top, rgba(235,188,0,1) 0%, rgba(235,188,0,1) 27%, rgba(233,177,3,1) 34%, rgba(232,174,4,1) 36%, rgba(226,138,14,0.99) 58%, rgba(224,130,16,0.99) 63%, rgba(255,81,0,0.99) 94%, rgba(255,68,0,0.99) 100%);
    background: -ms-linear-gradient(top, rgba(235,188,0,1) 0%, rgba(235,188,0,1) 27%, rgba(233,177,3,1) 34%, rgba(232,174,4,1) 36%, rgba(226,138,14,0.99) 58%, rgba(224,130,16,0.99) 63%, rgba(255,81,0,0.99) 94%, rgba(255,68,0,0.99) 100%);
    background: linear-gradient(to bottom, rgba(235,188,0,1) 0%, rgba(235,188,0,1) 27%, rgba(233,177,3,1) 34%, rgba(232,174,4,1) 36%, rgba(226,138,14,0.99) 58%, rgba(224,130,16,0.99) 63%, rgba(255,81,0,0.99) 94%, rgba(255,68,0,0.99) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ebbc00', endColorstr='#ff4400', GradientType=0 );
  }

  .text-content{
    font-size: 12px !important;
  }

  .list-group-item-action:hover, .list-group-item-action:focus{
    background-color: #c5c5c58f;
  }

  .text-name{
    font-size: 18px;
  }

  .cpoint{
    text-align: right !important;
  }

  table{
    color: #000 !important;
  }

  .list-group-item{
    background: rgba(232,9,9,1);
    background: -moz-linear-gradient(left, rgba(232,9,9,1) 0%, rgba(255,26,0,1) 30%, rgba(254,34,8,1) 33%, rgba(248,87,58,1) 52%, rgba(247,93,66,1) 56%, rgba(242,118,99,1) 73%, rgba(255,176,176,1) 90%, rgba(255,223,223,1) 96%, rgba(255,255,255,1) 100%);
    background: -webkit-gradient(left top, right top, color-stop(0%, rgba(232,9,9,1)), color-stop(30%, rgba(255,26,0,1)), color-stop(33%, rgba(254,34,8,1)), color-stop(52%, rgba(248,87,58,1)), color-stop(56%, rgba(247,93,66,1)), color-stop(73%, rgba(242,118,99,1)), color-stop(90%, rgba(255,176,176,1)), color-stop(96%, rgba(255,223,223,1)), color-stop(100%, rgba(255,255,255,1)));
    background: -webkit-linear-gradient(left, rgba(232,9,9,1) 0%, rgba(255,26,0,1) 30%, rgba(254,34,8,1) 33%, rgba(248,87,58,1) 52%, rgba(247,93,66,1) 56%, rgba(242,118,99,1) 73%, rgba(255,176,176,1) 90%, rgba(255,223,223,1) 96%, rgba(255,255,255,1) 100%);
    background: -o-linear-gradient(left, rgba(232,9,9,1) 0%, rgba(255,26,0,1) 30%, rgba(254,34,8,1) 33%, rgba(248,87,58,1) 52%, rgba(247,93,66,1) 56%, rgba(242,118,99,1) 73%, rgba(255,176,176,1) 90%, rgba(255,223,223,1) 96%, rgba(255,255,255,1) 100%);
    background: -ms-linear-gradient(left, rgba(232,9,9,1) 0%, rgba(255,26,0,1) 30%, rgba(254,34,8,1) 33%, rgba(248,87,58,1) 52%, rgba(247,93,66,1) 56%, rgba(242,118,99,1) 73%, rgba(255,176,176,1) 90%, rgba(255,223,223,1) 96%, rgba(255,255,255,1) 100%);
    background: linear-gradient(to right, rgba(232,9,9,1) 0%, rgba(255,26,0,1) 30%, rgba(254,34,8,1) 33%, rgba(248,87,58,1) 52%, rgba(247,93,66,1) 56%, rgba(242,118,99,1) 73%, rgba(255,176,176,1) 90%, rgba(255,223,223,1) 96%, rgba(255,255,255,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e80909', endColorstr='#ffffff', GradientType=1 );
  }

  .name-pm{
    color: #000;
    font-family: 'Ubuntu' ,'sans-serif'; 
    font-size: 18px !important;  
  }

  .email-pm{
    font-size: 12px;
    width: 100%;
    font-weight: 900; 
    color : #fff;
  }

</style> 

<ol class="breadcrumb col-md-12">
<li class="breadcrumb-item nav-link-hgn col-md-2"> Credit Point</li>
<div class="col-md-10">  
  <?php if($this->auth->get_access_value('MASTER')>0) : ?>
  <div class="pull-right" style="margin-left: 10px;">
    <button id="btn_addPoint" class="btn btn-info btn-addon"><i class="fa fa-plus"></i> Add Credit Point</button>
  </div>
  <?php endif ?>
  <div class="form-group pull-right">
      <input type="text" name="date_end" id="date_end" class="form-control date-picker datePoint" placeholder="date end" value="<?= date('m/d/Y',strtotime('last sunday')); ?>" readOnly>
  </div>
  <div class="pull-right">&nbsp;&nbsp;&nbsp; TO &nbsp;&nbsp;&nbsp;</div>
  <div class="form-group pull-right">
      <input type="text" name="date_start" id="date_start" class="form-control date-picker datePoint" placeholder="date start" 
      value="<?= date('D')=='Mon'?  date('m/d/Y',strtotime('last monday')) : date('m/d/Y',strtotime('last monday -7 days')); ?>" readOnly>
  </div>
   
</div>
</ol>




<div class="container-fluid container-content">

  <div class="row" id="containerPoint">
    
  </div>



</div>


<!-- deliverables modals -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" id="modal_addPoint">
  <div class="modal-dialog modal-lg modal-primary">
    <div class="modal-content">
        <div class="modal-header">
              <h4 class="modal-title" id="modal-title-deliverable">Add Point</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">Ã—</span>
              </button>
        </div>
        <div class="modal-body relative">
            <form method="POST" enctype="multipart/form-data" id="formPoint">
                  <div class="form-group">
                      <label>Title</label>
                      <input type="text" name="title_point" id="title_point" class="form-control">
                  </div>
                  <div class="form-group">
                      <label>People</label>
                      <select multiple="true" class="form-control" name="people_point[]" id="people_point"></select>
                  </div>
                  <div class="form-group">
                      <label>Point</label>
                      <select class="form-control" name="credit_point" id="credit_point">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option> 
                      </select>
                  </div>
                  <div class="form-group">
                      <label>Date</label>
                      <input type="text"  id="date_point" name="date_point" class="form-control date-picker" readOnly>
                  </div>

                  <div class="form-group text-center">
                      <button class="btn btn-success btn-addon" id="save_point" type="button"><i class="fa fa-save"></i>
                        Save
                      </button>
                  </div>
                  

            </form>
        </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  var Form = function () {    
    $("#people_point").select2({
                    placeholder: "PIC",
                    width: 'resolve',
                    //tags:true,
                    ajax: {
                        type: 'POST',
                        url:base_url+"json/get_json_users",
                        dataType: "json",
                        data: function (params) {
                            return {
                                q: params.term,
                                page: params.page,
                            };
                        },
                        processResults: function (data) {
                            return {
                                results: $.map(data, function(obj) {
                                    return { id: obj.NIK, text: obj.NAMA };
                                })
                            };
                        },
                        
                    }
            }); 

    var mulai = function(start=null,end=null) {
                    $.ajax({  
                        type:"post",
                        async: true,
                        data: { d_start : start, d_end : end},
                        url: base_url+"timeline/detailPoint",
                        success: function(data) {
                            $('#containerPoint').empty();
                            $('#containerPoint').append(data);
                            document.documentElement.scrollTop = 0;
                        }
                    });                                 
    };      
 
    return {
        init: function() {
            mulai($('#date_start').val(),$('#date_end').val());
            $('body').on('change','.datePoint',function(e){
                var start    = $('#date_start').val();    
                var end   = $('#date_end').val();    
                mulai(start,end);                             
            });

            $("body").on('click','#save_point', function (e) {
              e.stopImmediatePropagation();
              var dataForm  = $('#formPoint').serialize();
              var url = base_url + "timeline/savePoint";
              $('#modal_addPoint').modal('hide');
              $('#pre-load-background').fadeIn();
              $.ajax({
                            url: url,
                            type:'POST',
                            data:  dataForm ,
                            success:function(result){
                              $('#pre-load-background').fadeOut();
                                 return result;
                            }

                    });
            });
            $("body").on('click','#btn_addPoint', function (e) {
                e.stopImmediatePropagation();
                $('#modal_addPoint').modal('show');  
              });

        }
    };

}();

jQuery(document).ready(function() {
    Form.init();
});
</script>